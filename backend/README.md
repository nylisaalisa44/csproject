# CS2 Trading Platform Backend

–ë—ç–∫–µ–Ω–¥ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏–≥—Ä–æ–≤—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ CS2 –∏ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **Steam –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Steam –∞–∫–∫–∞—É–Ω—Ç
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–æ—Ñ–∏–ª–∏, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–¢–æ—Ä–≥–æ–≤–ª—è –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏** - –ø–æ–∫—É–ø–∫–∞ –∏ –ø—Ä–æ–¥–∞–∂–∞ —Å–∫–∏–Ω–æ–≤
- **–ö—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–∏** - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π
- **–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - –ø–æ–ª–Ω—ã–π —É—á–µ—Ç –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** - —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Express.js** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
- **MongoDB** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Mongoose** - ODM –¥–ª—è MongoDB
- **Passport.js** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **JWT** - —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **Steam API** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Steam

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- MongoDB 5+
- Steam API Key

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repository-url>
cd backend
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
npm install
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
cp env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:
```env
# Server Configuration
PORT=3000
NODE_ENV=development

# Database
MONGODB_URI=mongodb://localhost:27017/cs2_trading

# JWT Secret
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Steam API Configuration
STEAM_API_KEY=your-steam-api-key
STEAM_RETURN_URL=http://localhost:3000/auth/steam/return
STEAM_REALM=http://localhost:3000

# Crypto Payment Configuration
CRYPTO_PAYMENT_API_KEY=your-crypto-payment-api-key
CRYPTO_PAYMENT_SECRET=your-crypto-payment-secret

# Frontend URL
FRONTEND_URL=http://localhost:5173

# Admin Panel
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=admin123

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm run build
npm start
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ database.ts  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ controllers/     # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ AuthController.ts
‚îú‚îÄ‚îÄ middleware/      # Middleware
‚îÇ   ‚îî‚îÄ‚îÄ auth.ts      # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ models/          # –ú–æ–¥–µ–ª–∏ MongoDB
‚îÇ   ‚îú‚îÄ‚îÄ User.ts
‚îÇ   ‚îú‚îÄ‚îÄ Transaction.ts
‚îÇ   ‚îú‚îÄ‚îÄ Item.ts
‚îÇ   ‚îú‚îÄ‚îÄ Trade.ts
‚îÇ   ‚îî‚îÄ‚îÄ Bot.ts
‚îú‚îÄ‚îÄ routes/          # –ú–∞—Ä—à—Ä—É—Ç—ã (–±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã)
‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ SteamService.ts
‚îÇ   ‚îî‚îÄ‚îÄ CryptoPaymentService.ts
‚îú‚îÄ‚îÄ types/           # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ index.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### Steam OAuth

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ Steam API Key**
   - –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://steamcommunity.com/dev/apikey
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ callback URL**
   - –í Steam API –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω: `localhost` (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
   - Callback URL: `http://localhost:3000/auth/steam/return`

### JWT –¢–æ–∫–µ–Ω—ã

- –¢–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π Steam –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 7 –¥–Ω–µ–π
- –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ: `Authorization: Bearer <token>`

## üìà API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `GET /auth/steam` - –ò–Ω–∏—Ü–∏–∞—Ü–∏—è Steam –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `GET /auth/steam/return` - Callback –ø–æ—Å–ª–µ Steam –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `GET /auth/profile` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /auth/profile` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `POST /auth/logout` - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `GET /auth/check` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Coming Soon)
- `GET /api/users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/users/:id` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `PUT /api/users/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–µ–¥–º–µ—Ç—ã (Coming Soon)
- `GET /api/items` - –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- `GET /api/items/:id` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥–º–µ—Ç–µ
- `POST /api/items` - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
- `PUT /api/items/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞

### –¢–æ—Ä–≥–æ–≤–ª—è (Coming Soon)
- `GET /api/trades` - –ò—Å—Ç–æ—Ä–∏—è —Ç–æ—Ä–≥–æ–≤
- `POST /api/trades/buy` - –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
- `POST /api/trades/sell` - –ü—Ä–æ–¥–∞–∂–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
- `GET /api/trades/:id` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–¥–µ–ª–∫–µ

### –ü–ª–∞—Ç–µ–∂–∏ (Coming Soon)
- `POST /api/payments/deposit` - –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- `POST /api/payments/withdraw` - –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
- `GET /api/payments/history` - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

### –ë–æ—Ç—ã (Coming Soon)
- `GET /api/bots` - –°–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤
- `GET /api/bots/:id` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
- `POST /api/bots` - –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞
- `PUT /api/bots/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

### –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (Coming Soon)
- `GET /admin/dashboard` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /admin/users` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `GET /admin/trades` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∞–º–∏
- `GET /admin/bots` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏ MongoDB

1. **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - steamId, steamProfile, email, tradeUrl
   - balance, referralCode, referralEarnings
   - isVerified, isBanned, role

2. **transactions** - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - userId, type, amount, currency
   - status, description, metadata

3. **items** - –ü—Ä–µ–¥–º–µ—Ç—ã
   - name, marketName, type, rarity
   - price, steamPrice, isAvailable
   - steamId, game

4. **trades** - –¢–æ—Ä–≥–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
   - userId, type, items, totalAmount
   - status, steamTradeId, botId

5. **bots** - –¢–æ—Ä–≥–æ–≤—ã–µ –±–æ—Ç—ã
   - steamId, displayName, tradeUrl
   - isActive, isOnline, inventory

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Helmet** - –∑–∞—â–∏—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- **CORS** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ cross-origin –∑–∞–ø—Ä–æ—Å–æ–≤
- **Rate Limiting** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- **JWT** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Input Validation** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **SQL Injection Protection** - –∑–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π (MongoDB)

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–∫—Ä–∏–ø—Ç—ã
```bash
npm run dev      # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run build    # –°–±–æ—Ä–∫–∞ TypeScript
npm run start    # –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Morgan –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- Console.log –¥–ª—è –æ—à–∏–±–æ–∫ –∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
- Graceful shutdown
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üöÄ –î–µ–ø–ª–æ–π

### Docker (Coming Soon)
```bash
docker build -t cs2-trading-backend .
docker run -p 3000:3000 cs2-trading-backend
```

### Environment Variables
- `NODE_ENV=production`
- `MONGODB_URI` - –ø—Ä–æ–¥–∞–∫—à–Ω –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `JWT_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
- `STEAM_API_KEY` - Steam API –∫–ª—é—á

## üìù TODO

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ API endpoints
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Docker
- [ ] –î–æ–±–∞–≤–∏—Ç—å WebSocket –¥–ª—è real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–∞–º–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –≤ branch
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
